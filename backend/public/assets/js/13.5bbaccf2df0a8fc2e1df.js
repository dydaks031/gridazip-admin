webpackJsonp([13],{512:function(e,t,i){i(626);var a=i(1)(i(555),i(640),"data-v-3b2570b8",null);e.exports=a.exports},555:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(13),r=i.n(a),c=i(14),n=(i.n(c),i(3)),s=i.n(n),o=i(2),d=i(15),l=i.n(d),p=i(4),u=i.n(p),v=i(23),m=o.default.extend(s.a),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",message:"",type:"",direction:"",duration:4500,container:".notifications"};return new m({el:document.createElement("div"),propsData:e})};t.default={name:"contract-receipt-register",components:{select2:r.a},data:function(){return{bankCodeList:v.a.bankCodeList,receipt:{},id:"",constructionList:[],imageList:[]}},validations:{receipt:{type:{required:c.required},ctPk:{required:c.required},price:{required:c.required},accountBank:{required:c.required},accountHolder:{required:c.required},accountNumber:{required:c.required},isVatIncluded:{required:c.required}}},methods:{registerReceipt:function(){var e=this;if(this.receipt.attachedList=this.imageList,this.receipt.isVatIncluded||(this.receipt.isVatIncluded=!1),0===this.receipt.attachedList.length)return void window.alert("첨부파일은 필수로 등록해주셔야 합니다.");this.receipt.accountNumber=this.receipt.accountNumber.toString().replace(/-/gi,""),this.receipt.price=this.receipt.price.toString().replace("/,/gi",""),this.$http.post("/api/estimate/"+this.id+"/receipt",this.receipt).then(function(t){if(200!==t.data.code)return void h({message:"결재 등록 중 오류가 발생했습니다.",type:"danger",duration:1500});h({message:"결재가 등록되었습니다.",type:"success",duration:1500}),e.$router.back()}).catch(function(e){console.error(e)})},callFileUpload:function(e){var t=this.$refs[e];t.length>0?t[0].click():t.click()},onFileChanged:function(e,t){var i=this,a=e.target.files;console.log(a);for(var r=0;r<a.length;r++){var c=new l.a;c.append("file_upload_path","receipt"),c.append("filedata",a[r]),this.$http.post("/api/file/upload",c).then(function(e){var a=e.data;if(200===a.code){var r=a.data;"new"===t?i.imageList.push({url:r.value,memo:""}):i.imageList[t]={url:r.value,memo:""},i.$forceUpdate()}}).catch(function(e){console.error(e)})}},deleteFiles:function(e){this.imageList=u.a.without(this.imageList,e)}},mounted:function(){var e=this;this.id=this.$route.params.id,this.$http.get("/api/estimate/"+this.id+"/construction").then(function(t){e.constructionList=t.data.data.constructionList}).catch(function(e){console.error(e)})}}},615:function(e,t,i){t=e.exports=i(504)(!0),t.push([e.i,"table tbody th[data-v-3b2570b8]{width:20%}table tbody img[data-v-3b2570b8]{max-width:60%}@media screen and (max-width:768px){table tbody th[data-v-3b2570b8]{width:20%}table tbody img[data-v-3b2570b8]{max-width:100%}}","",{version:3,sources:["/Users/ohw/WebstormProjects/admin.gridazip.com/frontend/client/views/estimate/contractReceiptRegister.vue"],names:[],mappings:"AACA,gCAAgC,SAAS,CACxC,AACD,iCAAiC,aAAa,CAC7C,AACD,oCACA,gCAAgC,SAAS,CACxC,AACD,iCAAiC,cAAc,CAC9C,CACA",file:"contractReceiptRegister.vue",sourcesContent:["\ntable tbody th[data-v-3b2570b8]{width:20%\n}\ntable tbody img[data-v-3b2570b8]{max-width:60%\n}\n@media screen and (max-width: 768px){\ntable tbody th[data-v-3b2570b8]{width:20%\n}\ntable tbody img[data-v-3b2570b8]{max-width:100%\n}\n}\n"],sourceRoot:""}])},626:function(e,t,i){var a=i(615);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(505)("17cd5772",a,!0)},640:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"tile is-ancestor"},[i("table",{staticClass:"table is-bordered contract-receipt"},[i("tbody",[i("tr",[i("th",[e._v("긴급여부")]),e._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receipt.isEmergency,expression:"receipt.isEmergency"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.receipt.isEmergency)?e._i(e.receipt.isEmergency,null)>-1:e.receipt.isEmergency},on:{change:function(t){var i=e.receipt.isEmergency,a=t.target,r=!!a.checked;if(Array.isArray(i)){var c=e._i(i,null);a.checked?c<0&&e.$set(e.receipt,"isEmergency",i.concat([null])):c>-1&&e.$set(e.receipt,"isEmergency",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(e.receipt,"isEmergency",r)}}})])]),e._v(" "),i("tr",[i("th",[e._v("공사")]),e._v(" "),i("td",[i("div",{staticClass:"select",class:{"is-danger":e.$v.receipt.ctPk.$invalid}},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.receipt.ctPk,expression:"receipt.ctPk"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.receipt,"ctPk",t.target.multiple?i:i[0])}}},[i("option",{staticClass:"disabled",attrs:{value:"",disabled:""}},[e._v("선택")]),e._v(" "),e._l(e.constructionList,function(t){return i("option",{domProps:{value:t.ct_pk}},[e._v(e._s(t.ct_name))])})],2)]),e._v(" "),i("div",[e.$v.receipt.ctPk.required?e._e():i("p",{staticClass:"help is-danger"},[e._v("공사를 선택해 주십시오.")])])])]),e._v(" "),i("tr",[i("th",[e._v("구분")]),e._v(" "),i("td",[i("label",[e._v("인건비")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.receipt.type,expression:"receipt.type"}],staticClass:"radio",class:{"is-danger":e.$v.receipt.type.$invalid},attrs:{type:"radio",value:"0",name:"type"},domProps:{checked:e._q(e.receipt.type,"0")},on:{change:function(t){e.$set(e.receipt,"type","0")}}}),e._v(" "),i("label",[e._v("자재비")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.receipt.type,expression:"receipt.type"}],staticClass:"radio",class:{"is-danger":e.$v.receipt.type.$invalid},attrs:{type:"radio",value:"1",name:"type"},domProps:{checked:e._q(e.receipt.type,"1")},on:{change:function(t){e.$set(e.receipt,"type","1")}}}),e._v(" "),i("div",[e.$v.receipt.type.required?e._e():i("p",{staticClass:"help is-danger"},[e._v("구분을 입력해 주십시오.")])])])]),e._v(" "),i("tr",[i("th",[e._v("내용")]),e._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receipt.contents,expression:"receipt.contents"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.receipt.contents},on:{input:function(t){t.target.composing||e.$set(e.receipt,"contents",t.target.value)}}})])]),e._v(" "),i("tr",[i("th",[e._v("금액")]),e._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receipt.price,expression:"receipt.price"}],staticClass:"input",class:{"is-danger":e.$v.receipt.price.$invalid},attrs:{type:"number"},domProps:{value:e.receipt.price},on:{input:function(t){t.target.composing||e.$set(e.receipt,"price",t.target.value)}}}),e._v(" "),i("div",[e.$v.receipt.price.required?e._e():i("p",{staticClass:"help is-danger"},[e._v("금액을 입력해 주십시오.")])])])]),e._v(" "),i("tr",[i("th",[e._v("부가세")]),e._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receipt.isVatIncluded,expression:"receipt.isVatIncluded"}],staticClass:"checkbox",attrs:{name:"isVatIncluded",type:"checkbox"},domProps:{checked:Array.isArray(e.receipt.isVatIncluded)?e._i(e.receipt.isVatIncluded,null)>-1:e.receipt.isVatIncluded},on:{change:function(t){var i=e.receipt.isVatIncluded,a=t.target,r=!!a.checked;if(Array.isArray(i)){var c=e._i(i,null);a.checked?c<0&&e.$set(e.receipt,"isVatIncluded",i.concat([null])):c>-1&&e.$set(e.receipt,"isVatIncluded",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(e.receipt,"isVatIncluded",r)}}})])]),e._v(" "),i("tr",[i("th",[e._v("은행명")]),e._v(" "),i("td",[i("select2",{attrs:{options:e.bankCodeList},model:{value:e.receipt.accountBank,callback:function(t){e.$set(e.receipt,"accountBank",t)},expression:"receipt.accountBank"}},[i("option",{attrs:{value:"",disabled:""}},[e._v("선택")])]),e._v(" "),i("div",[e.$v.receipt.accountBank.required?e._e():i("p",{staticClass:"help is-danger"},[e._v("은행을 입력해 주십시오.")])])],1)]),e._v(" "),i("tr",[i("th",[e._v("예금주")]),e._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receipt.accountHolder,expression:"receipt.accountHolder"}],staticClass:"input",class:{"is-danger":e.$v.receipt.accountHolder.$invalid},attrs:{type:"text"},domProps:{value:e.receipt.accountHolder},on:{input:function(t){t.target.composing||e.$set(e.receipt,"accountHolder",t.target.value)}}}),e._v(" "),i("div",[e.$v.receipt.accountHolder.required?e._e():i("p",{staticClass:"help is-danger"},[e._v("예금주를입력 해 주십시오.")])])])]),e._v(" "),i("tr",[i("th",[e._v("계좌번호")]),e._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receipt.accountNumber,expression:"receipt.accountNumber"}],staticClass:"input",class:{"is-danger":e.$v.receipt.accountNumber.$invalid},attrs:{type:"text"},domProps:{value:e.receipt.accountNumber},on:{input:function(t){t.target.composing||e.$set(e.receipt,"accountNumber",t.target.value)}}}),e._v(" "),i("div",[e.$v.receipt.accountNumber.required?e._e():i("p",{staticClass:"help is-danger"},[e._v("계좌번호를 입력해 주십시오.")])])])]),e._v(" "),i("tr",[i("th",[e._v("메모")]),e._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receipt.memo,expression:"receipt.memo"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.receipt.memo},on:{input:function(t){t.target.composing||e.$set(e.receipt,"memo",t.target.value)}}})])]),e._v(" "),i("tr",[i("th",[e._v("첨부서류")]),e._v(" "),i("td",[i("span",{staticClass:"input-group"},[i("button",{staticClass:"button",on:{click:function(t){e.callFileUpload("file_upload_new")}}},[e._v("업로드")]),e._v(" "),i("input",{ref:"file_upload_new",staticStyle:{display:"none"},attrs:{type:"file",name:"new_file",placeholder:"new File",accept:"image/*",multiple:""},on:{change:function(t){e.onFileChanged(t,"new")}}})]),e._v(" "),e._l(e.imageList,function(t,a){return i("div",{staticClass:"upload-image-wrapper"},[i("img",{staticStyle:{"max-width":"50%"},attrs:{src:t.url}}),e._v(" "),i("input",{ref:"receipt_upload_"+a,refInFor:!0,staticStyle:{display:"none"},attrs:{type:"file",name:"receipt_upload["+a+"]"},on:{change:function(t){e.onFileChanged(t,a)}}}),e._v(" "),i("button",{staticClass:"button is-danger",on:{click:function(i){e.deleteFiles(t)}}},[e._v("삭제")]),e._v(" "),i("button",{staticClass:"button is-info",on:{click:function(t){e.callFileUpload("receipt_upload_"+a)}}},[e._v("수정")])])})],2)]),e._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center","vertical-align":"middle"},attrs:{colspan:"2"}},[i("button",{staticClass:"button is-primary is-medium",on:{click:e.registerReceipt}},[e._v("등록")])])])])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=13.5bbaccf2df0a8fc2e1df.js.map