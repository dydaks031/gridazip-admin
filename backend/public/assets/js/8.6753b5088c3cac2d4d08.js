webpackJsonp([8,12],{458:function(t,e,s){s(475);var a=s(1)(s(473),s(476),"data-v-543eb68d",null);t.exports=a.exports},462:function(t,e,s){s(573);var a=s(1)(s(503),s(585),"data-v-94babcba",null);t.exports=a.exports},473:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"PaginationVue",data:function(){return{curPage:this.options.page,curLimit:this.options.limit,curPoint:this.options.point,curCount:this.options.count,curEnd:this.options.end,curMax:this.options.max,curIndex:this.options.index,startIndex:1,paginationArray:[]}},props:["options","pageClick"],methods:{getCurrentPagination:function(){var t=Math.ceil((this.curMax-1)/2),e=Math.ceil(this.curCount/this.curLimit);this.startIndex=1,this.curIndex>t&&(this.startIndex=Math.max(Math.min(this.curIndex-t,e-this.curMax+1),1));var s=Math.max(Math.min(this.curMax,e-this.startIndex+1),1);this.paginationArray.length=0;for(var a=this.startIndex;a<this.startIndex+s;a+=1)this.paginationArray.push(a)}},watch:{options:{handler:function(t){this.curPage=t.page,this.curLimit=t.limit,this.curPoint=t.point,this.curCount=t.count,this.curEnd=t.end,this.curMax=t.max,this.curIndex=t.index,this.getCurrentPagination()},deep:!0}},mounted:function(){this.getCurrentPagination()}}},474:function(t,e,s){e=t.exports=s(457)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"pagination.vue",sourceRoot:""}])},475:function(t,e,s){var a=s(474);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(456)("c418f292",a,!0)},476:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"pagination",attrs:{role:"navigation","aria-label":"pagination"}},[s("ul",{staticClass:"pagination-list"},t._l(t.paginationArray,function(e){return s("li",[s("a",{staticClass:"pagination-link",on:{click:function(s){t.pageClick(e)}}},[t._v(t._s(e))])])}))])},staticRenderFns:[]}},477:function(t,e,s){"use strict";function a(t){this.options={page:0,limit:20,point:null,count:0,end:!1,max:5,index:1},this.set(t)}e.a=a,a.prototype.reset=function(){this.set(this.options)},a.prototype.set=function(t){t=t||{},this.page=parseInt(void 0!==t.page?t.page:void 0!==this.page?this.page:this.options.page),this.limit=parseInt(void 0!==t.limit?t.limit:void 0!==this.limit?this.limit:this.options.limit),this.point=void 0===t.point||null===t.point?this.options.point:parseInt(t.point),this.index=Math.max(Math.ceil(this.page/this.limit),1),this.count=parseInt(void 0!==t.count&&null!==t.count?t.count:void 0!==this.count?this.count:this.options.count),this.end=void 0!==t.end?t.end:void 0!==this.end?this.end:this.options.end,this.max=parseInt(void 0===t.max||null===t.max?this.max||this.options.max:t.max)},a.prototype.get=function(){return{index:this.index,limit:this.limit,point:this.point,page:this.page,count:this.count,end:!!this.end}},a.prototype.setIndex=function(t){this.index=t,this.page=(t-1)*this.limit},a.prototype.getIndex=function(){return this.index},a.prototype.setPage=function(t){this.page=parseInt(t)},a.prototype.getPage=function(){return this.page},a.prototype.setLimit=function(t){this.limit=parseInt(t)},a.prototype.getLimit=function(){return this.limit},a.prototype.setPoint=function(t){this.point=void 0===t||null===t?null:parseInt(t)},a.prototype.getPoint=function(){return this.point||null},a.prototype.setCount=function(t){this.count=parseInt(t)},a.prototype.getCount=function(){return this.count},a.prototype.setEnd=function(t){this.end=t},a.prototype.getEnd=function(){return this.end},a.prototype.isEnd=function(){return this.getEnd()}},478:function(t,e,s){"use strict";function a(t){this.filter=t||{}}e.a=a;var i=s(5),n=s.n(i);a.prototype.set=function(t){this.filter=n.a.extend(this.filter,t)},a.prototype.get=function(){return this.filter},a.prototype.setFilter=function(t,e){this.filter[t]=e},a.prototype.getFilter=function(t){return this.filter[t]||null}},503:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(477),i=s(478),n=s(458),c=s.n(n),o=s(9),r=s(12),_=s.n(r),l=s(11),d=s(0),v=s.n(d),u=s(26),m=s.n(u),h=s(5),p=s.n(h),C=s(4),b=s.n(C),f=s(2),g=s(38),y=s.n(g),x=s(25),k=f.default.extend(b.a),R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",message:"",type:"",direction:"",duration:4500,container:".notifications"};return new k({el:document.createElement("div"),propsData:t})};e.default={name:"contractReceiptIndex",components:{PaginationVue:c.a,Notification:b.a,Datepicker:_.a,ImageEnlargedView:m.a},mixins:[o.a],data:function(){return{bankCodeList:x.a.bankCodeList,moment:v.a,priceSummaryByAccount:0,page:new a.a,filter:new i.a,contractReceiptList:[],receiptAccount:[],receiptList:[],userPermit:"",searchOptions:{status:""},enlargedImage:{image:{},imageGroup:[],index:0},selectedContract:""}},methods:{getBankNameByCode:function(t){return p.a.find(this.bankCodeList,function(e){return e.id===t}).text},changeStatusOption:function(){this.selectedContract="",this.loadContractReceipt()},loadContractReceipt:function(){var t=this;this.checkPermission(),this.$http.get("/api/estimate/receipt?status="+this.searchOptions.status).then(function(e){if(200!==e.data.code)return t.contractReceiptList=[],void R({message:e.data.data.msg,type:"danger",duration:1500});if(t.contractReceiptList=e.data.data.contract,t.receiptAccount=e.data.data.receiptAccount||[],t.receiptList=[],t.receiptAccount.length>0){var s=function(t,e){return t+e};t.priceSummaryByAccount=p.a.reduce(p.a.pluck(t.receiptAccount,"price"),s,0)}t.contractReceiptList.forEach(function(e){var s=function(t,e){return t+e};e.receipt.forEach(function(s){s.contractName=e.name,t.receiptList.push(s)}),e.priceSummary={laborPrice:p.a.reduce(p.a.pluck(e.priceList,"labor_price"),s,0),resourcePrice:p.a.reduce(p.a.pluck(e.priceList,"resource_price"),s,0),etcPrice:p.a.reduce(p.a.pluck(e.priceList,"etc_price"),s,0),totalPrice:p.a.reduce(p.a.pluck(e.priceList,"total_price"),s,0)},e.receipt.forEach(function(t){switch(t.type){case 0:t.typeToString="인건비";break;case 1:t.typeToString="자재비";break;case 2:t.typeToString="기타잡비"}switch(t.status){case-1:t.statusName="삭제";break;case 0:t.statusName="반려";break;case 1:t.statusName="대기";break;case 2:t.statusName="승인";break;case 3:t.statusName="입금완료"}})})})},changeReceiptStatus:function(t,e,s){var a=this;this.checkPermission();var i=void 0;(0!==s||(i=window.prompt("반려사유를 입력해 주십시오.")))&&this.$http.put("/api/estimate/"+t+"/receipt/"+e.pk,{status:s,rejectReason:i}).then(function(t){if(200!==t.data.code)return void R({message:"결재 진행 중 오류가 발생하였습니다.",type:"danger",duration:1500});R({message:"결재가 정상적으로 처리되었습니다.",type:"success",duration:1500}),a.loadContractReceipt()})},moveToRegisterReceipt:function(){l.a.push({path:"/private/receipt/register"})},checkPermission:function(){this.userPermit=this.$auth.user().user_permit},openImageEnlargedView:function(t){var e=[];p.a.forEach(t.attachment,function(t){e.push({si_url:t.url})}),e.length>0&&(this.enlargedImage.image=e[0],this.enlargedImage.index=0,this.enlargedImage.imageGroup=e,this.$modal.show("imageEnlargedView"))},excelExport:function(t,e){var s=document.getElementById("receiptTable"),a=y.a.utils.book_new(),i=y.a.utils.table_to_sheet(s);return i["!cols"]=[{wch:10},{wch:20},{wch:10},{wch:10},{wch:25},{wch:15},{wch:10},{wch:10},{wch:20},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10}],y.a.utils.book_append_sheet(a,i,"결재목록"),y.a.writeFile(a,e||"결재내역-"+this.moment().format("YYYY-MM-DD HH:mm:ss")+".xlsx")},depositDataExcelExport:function(t,e){var s=document.getElementById("depositDataTable"),a=y.a.utils.book_new(),i=y.a.utils.table_to_sheet(s);return i["!cols"]=[{wch:8},{wch:20},{wch:20},{wch:10},{wch:15},{wch:15},{wch:10},{wch:40},{wch:12}],y.a.utils.book_append_sheet(a,i,"은행입금자료목록"),y.a.writeFile(a,e||"은행입금자료-"+this.moment().format("YYYY-MM-DD HH:mm:ss")+".xlsx")},getAttachmentUrl:function(t){var e=t.attachment,s=[];return p.a.forEach(e,function(t){s.push(t.url)}),s},getTotalAmount:function(t){return t.reduce(function(t,e){return t+parseInt(e.cb_amount)},0)},getCollectBillsPercent:function(t){return(t.collectBills.reduce(function(t,e){return t+parseInt(e.cb_amount)},0)/t.collectSchedule.reduce(function(t,e){return t+parseInt(e.cb_amount)},0)*100).toFixed(1)}},mounted:function(){this.loadContractReceipt()}}},564:function(t,e){throw new Error("Module build failed: Error: Missing binding /Users/ohw/WebstormProjects/admin.gridazip.com/frontend/node_modules/node-sass/vendor/darwin-x64-67/binding.node\nNode Sass could not find a binding for your current environment: OS X 64-bit with Node.js 11.x\n\nFound bindings for the following environments:\n  - OS X 64-bit with Node.js 9.x\n\nThis usually happens because your environment has changed since running `npm install`.\nRun `npm rebuild node-sass` to download the binding for your current environment.\n    at module.exports (/Users/ohw/WebstormProjects/admin.gridazip.com/frontend/node_modules/node-sass/lib/binding.js:15:13)\n    at Object.<anonymous> (/Users/ohw/WebstormProjects/admin.gridazip.com/frontend/node_modules/node-sass/lib/index.js:14:35)\n    at Module._compile (internal/modules/cjs/loader.js:799:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:810:10)\n    at Module.load (internal/modules/cjs/loader.js:666:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:606:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:598:3)\n    at Module.require (internal/modules/cjs/loader.js:705:19)\n    at require (internal/modules/cjs/helpers.js:14:16)\n    at Object.<anonymous> (/Users/ohw/WebstormProjects/admin.gridazip.com/frontend/node_modules/sass-loader/lib/loader.js:3:14)\n    at Module._compile (internal/modules/cjs/loader.js:799:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:810:10)\n    at Module.load (internal/modules/cjs/loader.js:666:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:606:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:598:3)\n    at Module.require (internal/modules/cjs/loader.js:705:19)")},573:function(t,e,s){var a=s(564);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(456)("2e6db022",a,!0)},585:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"search box"},[s("div",{staticClass:"block"},[s("div",{staticClass:"is-clearfix"},[s("div",{staticClass:"is-pulled-left is-horizontal searchbox"},[s("div",{staticClass:"control is-inline-block"},[s("label",{staticClass:"label"},[t._v("진행상태")]),t._v(" "),s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.searchOptions.status,expression:"searchOptions.status"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.searchOptions,"status",e.target.multiple?s:s[0])},t.changeStatusOption]}},[s("option",{attrs:{value:"",selected:"selected"}},[t._v("선택")]),t._v(" "),s("option",{attrs:{value:"0"}},[t._v("반려")]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v("기안")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("승인")]),t._v(" "),s("option",{attrs:{value:"3"}},[t._v("입금완료")])])])]),t._v(" "),s("div",{staticClass:"control is-inline-block"},[s("label",{staticClass:"label"},[t._v("현장 검색")]),t._v(" "),s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedContract,expression:"selectedContract"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedContract=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",selected:"selected"}},[t._v("전체")]),t._v(" "),t._l(t.contractReceiptList,function(e,a){return s("option",{domProps:{value:a}},[t._v(t._s(e.name)+" "+t._s(e.nickname?"("+e.nickname+")":""))])})],2)])])])])])]),t._v(" "),s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child box contract-receipt-wrapper"},[s("div",{staticClass:"is-clearfix"},[s("p",{staticClass:"subtitle is-3 is-pulled-left"},[t._v("비용 수금현황")]),t._v(" "),s("a",{staticClass:"button is-primary is-pulled-right is-medium",on:{click:t.moveToRegisterReceipt}},[t._v("등록")]),t._v(" "),s("button",{staticClass:"button is-info is-pulled-right is-medium excel-btn",on:{click:function(e){t.excelExport("xlsx")}}},[t._v("엑셀 다운로드")]),t._v(" "),s("button",{staticClass:"button is-info is-pulled-right is-medium excel-btn",on:{click:function(e){t.depositDataExcelExport("xlsx")}}},[t._v("입금자료 다운로드")])]),t._v(" "),"C"===t.userPermit?s("div",{staticClass:"receiptAccount"},[s("h1",{staticClass:"subtitle"},[t._v("입금 요청 내역 집계")]),t._v(" "),s("table",{staticClass:"table is-bordered"},[t._m(0),t._v(" "),s("tbody",[t._l(t.receiptAccount,function(e){return s("tr",[s("td",[t._v(t._s(t.getBankNameByCode(e.accountBank)))]),t._v(" "),s("td",[t._v(t._s(e.accountNumber))]),t._v(" "),s("td",[t._v(t._s(e.accountHolder))]),t._v(" "),s("td",[t._v(t._s(t.addCommas(e.price)))])])}),t._v(" "),t.receiptAccount.length>0?s("tr",{staticClass:"price-summary-by-account"},[s("td",{attrs:{colspan:"4"}},[t._v("합게: "+t._s(t.addCommas(t.priceSummaryByAccount)))])]):t._e(),t._v(" "),0===t.receiptAccount.length?s("tr",[s("td",{staticClass:"no-data",attrs:{colspan:"4"}},[t._v("입금할 내역이 없습니다.")])]):t._e()],2)])]):t._e(),t._v(" "),s("div",[""===t.selectedContract?s("ul",{staticClass:"proceeding-contract-list"},t._l(t.contractReceiptList,function(e){return s("li",{staticClass:"contractItem box"},[s("div",{staticClass:"title-view is-clearfix"},[s("h1",{staticClass:"subtitle"},[t._v(t._s(e.name)+" "+t._s(e.nickname?"("+e.nickname+")":"")+" 현장 비용현황")]),t._v(" "),s("div",{staticClass:"summary-info is-flex"},[s("span",[t._v("당 현장 견적금액: "+t._s(t.addCommas(e.contractTotalCosts))+"원")]),t._v(" "),s("span",[t._v("현 집행금액: "+t._s(t.addCommas(e.receiptTotalCosts))+"원")]),t._v(" "),s("span",[t._v("집행률: "+t._s((e.receiptTotalCosts/e.contractTotalCosts*100).toFixed(2))+"%")])])]),t._v(" "),s("table",{staticClass:"table is-bordered contract-summary"},[t._m(1,!0),t._v(" "),s("tbody",[t._l(e.priceList,function(e){return s("tr",[s("td",[t._v(t._s(t.addCommas(e.ct_name)))]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(e.labor_price)))]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(e.resource_price)))]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(e.etc_price)))]),t._v(" "),s("td",{staticClass:"contract-column-summary"},[t._v(t._s(t.addCommas(e.total_price)))])])}),t._v(" "),s("tr",{staticClass:"contract-row-summary"},[s("td",[t._v("계")]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(e.priceSummary.laborPrice)))]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(e.priceSummary.resourcePrice)))]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(e.priceSummary.etcPrice)))]),t._v(" "),s("td",[t._v(t._s(t.addCommas(e.priceSummary.totalPrice)))])])],2)]),t._v(" "),s("div",{staticClass:"level title-view"},[s("div",{staticClass:"level-left"},[0!==e.collectSchedule.length?s("h1",{staticClass:"subtitle"},[t._v("수금예정현황")]):t._e()]),t._v(" "),s("div",{staticClass:"level-right"},[0!==e.collectBills.length?s("h1",{staticClass:"subtitle"},[t._v("실제수금현황 / 수금률: "+t._s(t.getCollectBillsPercent(e))+"%")]):t._e()])]),t._v(" "),s("div",{staticClass:"level title-view collect-bills"},[0!==e.collectSchedule.length?s("div",{staticClass:"level-left"},[s("table",{staticClass:"table is-bordered contract-receipt-list is-hidden-touch"},[t._m(2,!0),t._v(" "),s("tbody",[t._l(e.collectSchedule,function(e,a){return s("tr",[s("td",{staticClass:"has-text-centered"},[t._v(t._s(a+1))]),t._v(" "),s("td",[t._v(t._s(e.cb_type))]),t._v(" "),s("td",[t._v(t._s(null===e.cb_date?"":t.moment(e.cb_date).format("YYYY-MM-DD")))]),t._v(" "),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.addCommas(e.cb_amount)))])])}),t._v(" "),s("tr",[s("td",[t._v("합계")]),t._v(" "),s("td",{attrs:{colspan:"2"}}),t._v(" "),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.addCommas(t.getTotalAmount(e.collectSchedule))))])])],2)])]):t._e(),t._v(" "),0!==e.collectBills.length?s("div",{staticClass:"level-right"},[s("table",{staticClass:"table is-bordered contract-receipt-list is-hidden-touch"},[t._m(3,!0),t._v(" "),s("tbody",[t._l(e.collectBills,function(e,a){return s("tr",[s("td",{staticClass:"has-text-centered"},[t._v(t._s(a+1))]),t._v(" "),s("td",[t._v(t._s(null===e.cb_date?"":t.moment(e.cb_date).format("YYYY-MM-DD")))]),t._v(" "),s("td",[t._v(t._s(e.cb_sender))]),t._v(" "),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.addCommas(e.cb_amount)))])])}),t._v(" "),s("tr",[s("td",[t._v("합계")]),t._v(" "),s("td",{attrs:{colspan:"2"}}),t._v(" "),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.addCommas(t.getTotalAmount(e.collectBills))))])])],2)])]):t._e()]),t._v(" "),s("div",{staticClass:"title-view"},[s("h1",{staticClass:"subtitle"},[t._v(t._s(e.name)+" "+t._s(e.nickname?"("+e.nickname+")":"")+" 현장 입금 요청내역")])]),t._v(" "),s("table",{staticClass:"table is-bordered contract-receipt-list is-hidden-touch"},[t._m(4,!0),t._v(" "),t._l(e.receipt,function(a){return-1!==a.status?s("tbody",[s("tr",[s("td",[t._v(t._s(a.drafter))]),t._v(" "),s("td",{attrs:{t:"d"}},[t._v(t._s(t.moment(a.date,"YYYY-MM-DDTHH:mm:ss.SSSZ").format("YY-MM-DD")))]),t._v(" "),s("td",[t._v(t._s(a.ctName))]),t._v(" "),s("td",[t._v(t._s(a.typeToString))]),t._v(" "),s("td",[t._v(t._s(a.contents))]),t._v(" "),s("td",[t._v(t._s(t.addCommas(a.price)))]),t._v(" "),s("td",[t._v(t._s(0===a.isVatIncluded?"미포함":"포함"))]),t._v(" "),s("td",{attrs:{t:"s"}},[t._v("\n                    "+t._s(a.accountNumber)),s("br"),t._v("\n                    "+t._s(t.getBankNameByCode(a.accountBank))),s("br"),t._v("\n                    "+t._s(a.accountHolder)+"\n                  ")]),t._v(" "),s("td",[a.attachment.length>0?s("a",{attrs:{href:"#"},on:{click:function(e){t.openImageEnlargedView(a)}}},[t._v("링크")]):t._e()]),t._v(" "),s("td",[t._v(t._s(a.statusName))]),t._v(" "),s("td",[t._v(t._s(a.memo))]),t._v(" "),s("td",{staticClass:"receipt-button-wrapper"},["C"===t.userPermit&&3!==a.status||"B"===t.userPermit&&2!==a.status&&3!==a.status?s("button",{staticClass:"button is-danger is-medium",on:{click:function(s){t.changeReceiptStatus(e.pk,a,0)}}},[t._v("반려")]):t._e(),t._v(" "),0===a.status?s("button",{staticClass:"button is-danger is-medium",on:{click:function(s){t.changeReceiptStatus(e.pk,a,-1)}}},[t._v("삭제")]):t._e(),t._v(" "),"B"===t.userPermit&&2!==a.status&&3!==a.status?s("button",{staticClass:"button is-primary is-medium",on:{click:function(s){t.changeReceiptStatus(e.pk,a,2)}}},[t._v("승인")]):t._e(),t._v(" "),"C"===t.userPermit&&3!==a.status?s("button",{staticClass:"button is-primary is-medium",on:{click:function(s){t.changeReceiptStatus(e.pk,a,3)}}},[t._v("입금완료")]):t._e()])])]):t._e()})],2),t._v(" "),0!==t.contractReceiptList.length?s("table",{staticClass:"table is-bordered contract-receipt-list is-hidden-desktop"},t._l(e.receipt,function(a){return-1!==a.status?s("tbody",[s("tr",[s("th",[t._v("날짜")]),t._v(" "),s("td",[t._v(t._s(t.moment(a.date,"YYYY-MM-DDTHH:mm:ss.SSSZ").format("YYYY-MM-DD")))])]),t._v(" "),s("tr",[s("th",[t._v("공사")]),t._v(" "),s("td",[t._v(t._s(a.ctName))])]),t._v(" "),s("tr",[s("th",[t._v("구분")]),t._v(" "),s("td",[t._v(t._s(a.typeToString))])]),t._v(" "),s("tr",[s("th",[t._v("내용")]),t._v(" "),s("td",[t._v(t._s(a.contents))])]),t._v(" "),s("tr",[s("th",[t._v("금액")]),t._v(" "),s("td",[t._v(t._s(t.addCommas(a.price)))])]),t._v(" "),s("tr",[s("th",[t._v("부가세")]),t._v(" "),s("td",[t._v(t._s(0===a.isVatIncluded?"미포함":"포함"))])]),t._v(" "),s("tr",[s("th",[t._v("은행명")]),t._v(" "),s("td",[t._v(t._s(t.getBankNameByCode(a.accountBank)))])]),t._v(" "),s("tr",[s("th",[t._v("예금주")]),t._v(" "),s("td",[t._v(t._s(a.accountHolder))])]),t._v(" "),s("tr",[s("th",[t._v("계좌번호")]),t._v(" "),s("td",[t._v(t._s(a.accountNumber))])]),t._v(" "),s("tr",[s("th",[t._v("첨부서류")]),t._v(" "),s("td",[s("a",{attrs:{href:"#"},on:{click:function(e){t.openImageEnlargedView(a)}}},[t._v("링크")])])]),t._v(" "),s("tr",[s("th",[t._v("진행상태")]),t._v(" "),s("td",[t._v(t._s(a.statusName))])]),t._v(" "),a.rejectReason?t._e():s("tr",[s("th",[t._v("메모")]),t._v(" "),s("td",[t._v(t._s(a.memo))])]),t._v(" "),a.rejectReason?s("tr",[s("th",[t._v("반려사유")]),t._v(" "),s("td",[t._v(t._s(a.rejectReason))])]):t._e(),t._v(" "),s("tr",[s("td",{staticClass:"receipt-button-wrapper",attrs:{colspan:"2"}},["C"===t.userPermit||"B"===t.userPermit&&2!==a.status?s("button",{staticClass:"button is-danger is-medium",on:{click:function(s){t.changeReceiptStatus(e.pk,a,0)}}},[t._v("반려")]):t._e(),t._v(" "),0===a.status?s("button",{staticClass:"button is-danger is-medium",on:{click:function(s){t.changeReceiptStatus(e.pk,a,-1)}}},[t._v("삭제")]):t._e(),t._v(" "),"B"===t.userPermit&&2!==a.status?s("button",{staticClass:"button is-primary is-medium",on:{click:function(s){t.changeReceiptStatus(e.pk,a,2)}}},[t._v("승인")]):t._e(),t._v(" "),"C"===t.userPermit?s("button",{staticClass:"button is-primary is-medium",on:{click:function(s){t.changeReceiptStatus(e.pk,a,3)}}},[t._v("입금완료")]):t._e()])])]):t._e()})):t._e()])})):s("ul",{staticClass:"proceeding-contract-list"},[s("li",{staticClass:"contractItem box"},[s("div",{staticClass:"title-view is-clearfix"},[s("h1",{staticClass:"subtitle"},[t._v(t._s(t.contractReceiptList[t.selectedContract].name)+" "+t._s(t.contractReceiptList[t.selectedContract].nickname?"("+t.contractReceiptList[t.selectedContract].nickname+")":"")+" 현장 비용현황")]),t._v(" "),s("div",{staticClass:"summary-info is-flex"},[s("span",[t._v("당 현장 견적금액: "+t._s(t.addCommas(t.contractReceiptList[t.selectedContract].contractTotalCosts))+"원")]),t._v(" "),s("span",[t._v("현 집행금액: "+t._s(t.addCommas(t.contractReceiptList[t.selectedContract].receiptTotalCosts))+"원")]),t._v(" "),s("span",[t._v("집행률: "+t._s((t.contractReceiptList[t.selectedContract].receiptTotalCosts/t.contractReceiptList[t.selectedContract].contractTotalCosts*100).toFixed(2))+"%")])])]),t._v(" "),s("table",{staticClass:"table is-bordered contract-summary"},[t._m(5),t._v(" "),s("tbody",[t._l(t.contractReceiptList[t.selectedContract].priceList,function(e){return s("tr",[s("td",[t._v(t._s(t.addCommas(e.ct_name)))]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(e.labor_price)))]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(e.resource_price)))]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(e.etc_price)))]),t._v(" "),s("td",{staticClass:"contract-column-summary"},[t._v(t._s(t.addCommas(e.total_price)))])])}),t._v(" "),s("tr",{staticClass:"contract-row-summary"},[s("td",[t._v("계")]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(t.contractReceiptList[t.selectedContract].priceSummary.laborPrice)))]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(t.contractReceiptList[t.selectedContract].priceSummary.resourcePrice)))]),t._v(" "),s("td",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.addCommas(t.contractReceiptList[t.selectedContract].priceSummary.etcPrice)))]),t._v(" "),s("td",[t._v(t._s(t.addCommas(t.contractReceiptList[t.selectedContract].priceSummary.totalPrice)))])])],2)]),t._v(" "),s("div",{staticClass:"level title-view"},[s("div",{staticClass:"level-left"},[0!==t.contractReceiptList[t.selectedContract].collectSchedule.length?s("h1",{staticClass:"subtitle"},[t._v("수금예정현황")]):t._e()]),t._v(" "),s("div",{staticClass:"level-right"},[0!==t.contractReceiptList[t.selectedContract].collectBills.length?s("h1",{staticClass:"subtitle"},[t._v("실제수금현황 / 수금률: "+t._s(t.getCollectBillsPercent(t.contractReceiptList[t.selectedContract]))+"%")]):t._e()])]),t._v(" "),s("div",{staticClass:"level title-view collect-bills"},[0!==t.contractReceiptList[t.selectedContract].collectSchedule.length?s("div",{staticClass:"level-left"},[s("table",{staticClass:"table is-bordered contract-receipt-list is-hidden-touch"},[t._m(6),t._v(" "),s("tbody",[t._l(t.contractReceiptList[t.selectedContract].collectSchedule,function(e,a){return s("tr",[s("td",{staticClass:"has-text-centered"},[t._v(t._s(a+1))]),t._v(" "),s("td",[t._v(t._s(e.cb_type))]),t._v(" "),s("td",[t._v(t._s(null===e.cb_date?"":t.moment(e.cb_date).format("YYYY-MM-DD")))]),t._v(" "),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.addCommas(e.cb_amount)))])])}),t._v(" "),s("tr",[s("td",[t._v("합계")]),t._v(" "),s("td",{attrs:{colspan:"2"}}),t._v(" "),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.addCommas(t.getTotalAmount(t.contractReceiptList[t.selectedContract].collectSchedule))))])])],2)])]):t._e(),t._v(" "),0!==t.contractReceiptList[t.selectedContract].collectBills.length?s("div",{staticClass:"level-right"},[s("table",{staticClass:"table is-bordered contract-receipt-list is-hidden-touch"},[t._m(7),t._v(" "),s("tbody",[t._l(t.contractReceiptList[t.selectedContract].collectBills,function(e,a){return s("tr",[s("td",{staticClass:"has-text-centered"},[t._v(t._s(a+1))]),t._v(" "),s("td",[t._v(t._s(null===e.cb_date?"":t.moment(e.cb_date).format("YYYY-MM-DD")))]),t._v(" "),s("td",[t._v(t._s(e.cb_sender))]),t._v(" "),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.addCommas(e.cb_amount)))])])}),t._v(" "),s("tr",[s("td",[t._v("합계")]),t._v(" "),s("td",{attrs:{colspan:"2"}}),t._v(" "),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.addCommas(t.getTotalAmount(t.contractReceiptList[t.selectedContract].collectBills))))])])],2)])]):t._e()]),t._v(" "),s("div",{staticClass:"title-view"},[s("h1",{staticClass:"subtitle"},[t._v(t._s(t.contractReceiptList[t.selectedContract].name)+" "+t._s(t.contractReceiptList[t.selectedContract].nickname?"("+t.contractReceiptList[t.selectedContract].nickname+")":"")+" 현장 입금 요청내역")])]),t._v(" "),s("table",{staticClass:"table is-bordered contract-receipt-list is-hidden-touch"},[t._m(8),t._v(" "),t._l(t.contractReceiptList[t.selectedContract].receipt,function(e){return-1!==e.status?s("tbody",[s("tr",[s("td",[t._v(t._s(e.drafter))]),t._v(" "),s("td",{attrs:{t:"d"}},[t._v(t._s(t.moment(e.date,"YYYY-MM-DDTHH:mm:ss.SSSZ").format("YY-MM-DD")))]),t._v(" "),s("td",[t._v(t._s(e.ctName))]),t._v(" "),s("td",[t._v(t._s(e.typeToString))]),t._v(" "),s("td",[t._v(t._s(e.contents))]),t._v(" "),s("td",[t._v(t._s(t.addCommas(e.price)))]),t._v(" "),s("td",[t._v(t._s(0===e.isVatIncluded?"미포함":"포함"))]),t._v(" "),s("td",{attrs:{t:"s"}},[t._v("\n                    "+t._s(e.accountNumber)),s("br"),t._v("\n                    "+t._s(t.getBankNameByCode(e.accountBank))),s("br"),t._v("\n                    "+t._s(e.accountHolder)+"\n                  ")]),t._v(" "),s("td",[e.attachment.length>0?s("a",{attrs:{href:"#"},on:{click:function(s){t.openImageEnlargedView(e)}}},[t._v("링크")]):t._e()]),t._v(" "),s("td",[t._v(t._s(e.statusName))]),t._v(" "),s("td",[t._v(t._s(e.memo))]),t._v(" "),s("td",{staticClass:"receipt-button-wrapper"},["C"===t.userPermit&&3!==e.status||"B"===t.userPermit&&2!==e.status&&3!==e.status?s("button",{staticClass:"button is-danger is-medium",on:{click:function(s){t.changeReceiptStatus(t.contractReceiptList[t.selectedContract].pk,e,0)}}},[t._v("반려")]):t._e(),t._v(" "),0===e.status?s("button",{staticClass:"button is-danger is-medium",on:{click:function(s){t.changeReceiptStatus(t.contractReceiptList[t.selectedContract].pk,e,-1)}}},[t._v("삭제")]):t._e(),t._v(" "),"B"===t.userPermit&&2!==e.status&&3!==e.status?s("button",{staticClass:"button is-primary is-medium",on:{click:function(s){t.changeReceiptStatus(t.contractReceiptList[t.selectedContract].pk,e,2)}}},[t._v("승인")]):t._e(),t._v(" "),"C"===t.userPermit&&3!==e.status?s("button",{staticClass:"button is-primary is-medium",on:{click:function(s){t.changeReceiptStatus(t.contractReceiptList[t.selectedContract].pk,e,3)}}},[t._v("입금완료")]):t._e()])])]):t._e()})],2),t._v(" "),0!==t.contractReceiptList.length?s("table",{staticClass:"table is-bordered contract-receipt-list is-hidden-desktop"},t._l(t.contractReceiptList[t.selectedContract].receipt,function(e){return-1!==e.status?s("tbody",[s("tr",[s("th",[t._v("날짜")]),t._v(" "),s("td",[t._v(t._s(t.moment(e.date,"YYYY-MM-DDTHH:mm:ss.SSSZ").format("YYYY-MM-DD")))])]),t._v(" "),s("tr",[s("th",[t._v("공사")]),t._v(" "),s("td",[t._v(t._s(e.ctName))])]),t._v(" "),s("tr",[s("th",[t._v("구분")]),t._v(" "),s("td",[t._v(t._s(e.typeToString))])]),t._v(" "),s("tr",[s("th",[t._v("내용")]),t._v(" "),s("td",[t._v(t._s(e.contents))])]),t._v(" "),s("tr",[s("th",[t._v("금액")]),t._v(" "),s("td",[t._v(t._s(t.addCommas(e.price)))])]),t._v(" "),s("tr",[s("th",[t._v("부가세")]),t._v(" "),s("td",[t._v(t._s(0===e.isVatIncluded?"미포함":"포함"))])]),t._v(" "),s("tr",[s("th",[t._v("은행명")]),t._v(" "),s("td",[t._v(t._s(t.getBankNameByCode(e.accountBank)))])]),t._v(" "),s("tr",[s("th",[t._v("예금주")]),t._v(" "),s("td",[t._v(t._s(e.accountHolder))])]),t._v(" "),s("tr",[s("th",[t._v("계좌번호")]),t._v(" "),s("td",[t._v(t._s(e.accountNumber))])]),t._v(" "),s("tr",[s("th",[t._v("첨부서류")]),t._v(" "),s("td",[s("a",{attrs:{href:"#"},on:{click:function(s){t.openImageEnlargedView(e)}}},[t._v("링크")])])]),t._v(" "),s("tr",[s("th",[t._v("진행상태")]),t._v(" "),s("td",[t._v(t._s(e.statusName))])]),t._v(" "),e.rejectReason?t._e():s("tr",[s("th",[t._v("메모")]),t._v(" "),s("td",[t._v(t._s(e.memo))])]),t._v(" "),e.rejectReason?s("tr",[s("th",[t._v("반려사유")]),t._v(" "),s("td",[t._v(t._s(e.rejectReason))])]):t._e(),t._v(" "),s("tr",[s("td",{staticClass:"receipt-button-wrapper",attrs:{colspan:"2"}},["C"===t.userPermit||"B"===t.userPermit&&2!==e.status?s("button",{staticClass:"button is-danger is-medium",on:{click:function(s){t.changeReceiptStatus(t.contractReceiptList[t.selectedContract].pk,e,0)}}},[t._v("반려")]):t._e(),t._v(" "),0===e.status?s("button",{staticClass:"button is-danger is-medium",on:{click:function(s){t.changeReceiptStatus(t.contractReceiptList[t.selectedContract].pk,e,-1)}}},[t._v("삭제")]):t._e(),t._v(" "),"B"===t.userPermit&&2!==e.status?s("button",{staticClass:"button is-primary is-medium",on:{click:function(s){t.changeReceiptStatus(t.contractReceiptList[t.selectedContract].pk,e,2)}}},[t._v("승인")]):t._e(),t._v(" "),"C"===t.userPermit?s("button",{staticClass:"button is-primary is-medium",on:{click:function(s){t.changeReceiptStatus(t.contractReceiptList[t.selectedContract].pk,e,3)}}},[t._v("입금완료")]):t._e()])])]):t._e()})):t._e()])]),t._v(" "),s("table",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"table is-bordered contract-receipt",attrs:{id:"receiptTable"}},[t._m(9),t._v(" "),t._l(t.receiptList,function(e){return-1!==e.status?s("tbody",[s("tr",[s("td",{attrs:{t:"d"}},[t._v(t._s(t.moment(e.date,"YYYY-MM-DDTHH:mm:ss.SSSZ").format("YYYY-MM-DD")))]),t._v(" "),s("td",[t._v(t._s(e.contractName))]),t._v(" "),s("td",[t._v(t._s(e.ctName))]),t._v(" "),s("td",[t._v(t._s(1===e.type?"자재비":"인건비"))]),t._v(" "),s("td",[t._v(t._s(e.contents))]),t._v(" "),s("td",{attrs:{t:"s"}},[t._v(t._s(t.addCommas(e.price)))]),t._v(" "),s("td",[t._v(t._s(0===e.isVatIncluded?"미포함":"포함"))]),t._v(" "),s("td",[t._v(t._s(t.getBankNameByCode(e.accountBank)))]),t._v(" "),s("td",[t._v(t._s(e.accountHolder))]),t._v(" "),s("td",{attrs:{t:"s"}},[t._v(t._s(e.accountNumber))]),t._v(" "),s("td",[t._v(t._s(e.statusName))]),t._v(" "),s("td",[t._v(t._s(e.memo))]),t._v(" "),s("td",[t._v(t._s(e.rejectReason))])])]):t._e()})],2),t._v(" "),s("table",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"table is-bordered contract-receipt",attrs:{id:"depositDataTable"}},[t._m(10),t._v(" "),t._l(t.receiptList,function(e){return-1!==e.status?s("tbody",[s("tr",[s("td",{attrs:{t:"s"}},[t._v(t._s(e.accountBank))]),t._v(" "),s("td",{attrs:{t:"s"}},[t._v(t._s(e.accountNumber))]),t._v(" "),s("td",[t._v(t._s(e.accountHolder))]),t._v(" "),s("td",{attrs:{t:"s"}},[t._v(t._s(t.addCommas(e.price)))]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("(주)그리다집")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v(t._s(e.contents))]),t._v(" "),s("td")])]):t._e()})],2)])])])]),t._v(" "),s("div"),t._v(" "),s("ImageEnlargedView",{attrs:{image:t.enlargedImage.image,imageGroup:t.enlargedImage.imageGroup,index:t.enlargedImage.index,isReceipt:!0}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("은행명")]),t._v(" "),s("th",[t._v("계좌번호")]),t._v(" "),s("th",[t._v("예금주")]),t._v(" "),s("th",[t._v("금액")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("공사")]),t._v(" "),s("th",{staticClass:"is-hidden-mobile"},[t._v("인건비")]),t._v(" "),s("th",{staticClass:"is-hidden-mobile"},[t._v("자재비")]),t._v(" "),s("th",{staticClass:"is-hidden-mobile"},[t._v("기타잡비")]),t._v(" "),s("th",{staticClass:"contract-column-summary"},[t._v("계")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("No.")]),t._v(" "),s("th",[t._v("구분")]),t._v(" "),s("th",[t._v("수금예정일")]),t._v(" "),s("th",[t._v("금액")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("No.")]),t._v(" "),s("th",[t._v("실제수금일")]),t._v(" "),s("th",[t._v("예금주")]),t._v(" "),s("th",[t._v("금액")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("기안자")]),t._v(" "),s("th",[t._v("비용청구일자")]),t._v(" "),s("th",[t._v("공사")]),t._v(" "),s("th",[t._v("비용구분")]),t._v(" "),s("th",[t._v("비용상세내역")]),t._v(" "),s("th",[t._v("청구금액")]),t._v(" "),s("th",[t._v("부가세")]),t._v(" "),s("th",[t._v("입금정보")]),t._v(" "),s("th",[t._v("첨부서류")]),t._v(" "),s("th",[t._v("결재상태")]),t._v(" "),s("th",[t._v("메모")]),t._v(" "),s("th",[t._v("결재")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("공사")]),t._v(" "),s("th",{staticClass:"is-hidden-mobile"},[t._v("인건비")]),t._v(" "),s("th",{staticClass:"is-hidden-mobile"},[t._v("자재비")]),t._v(" "),s("th",{staticClass:"is-hidden-mobile"},[t._v("기타잡비")]),t._v(" "),s("th",{staticClass:"contract-column-summary"},[t._v("계")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("No.")]),t._v(" "),s("th",[t._v("구분")]),t._v(" "),s("th",[t._v("수금예정일")]),t._v(" "),s("th",[t._v("금액")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("No.")]),t._v(" "),s("th",[t._v("실제수금일")]),t._v(" "),s("th",[t._v("예금주")]),t._v(" "),s("th",[t._v("금액")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("기안자")]),t._v(" "),s("th",[t._v("비용청구일자")]),t._v(" "),s("th",[t._v("공사")]),t._v(" "),s("th",[t._v("비용구분")]),t._v(" "),s("th",[t._v("비용상세내역")]),t._v(" "),s("th",[t._v("청구금액")]),t._v(" "),s("th",[t._v("부가세")]),t._v(" "),s("th",[t._v("입금정보")]),t._v(" "),s("th",[t._v("첨부서류")]),t._v(" "),s("th",[t._v("결재상태")]),t._v(" "),s("th",[t._v("메모")]),t._v(" "),s("th",[t._v("결재")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("날짜")]),t._v(" "),s("th",[t._v("현장")]),t._v(" "),s("th",[t._v("공사")]),t._v(" "),s("th",[t._v("구분")]),t._v(" "),s("th",[t._v("내용")]),t._v(" "),s("th",[t._v("금액")]),t._v(" "),s("th",[t._v("부가세")]),t._v(" "),s("th",[t._v("은행명")]),t._v(" "),s("th",[t._v("예금주")]),t._v(" "),s("th",[t._v("계좌번호")]),t._v(" "),s("th",[t._v("진행상태")]),t._v(" "),s("th",[t._v("메모")]),t._v(" "),s("th",[t._v("반려사유")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("*입금은행")]),t._v(" "),s("th",[t._v("*입금계좌")]),t._v(" "),s("th",[t._v("고객관리성명")]),t._v(" "),s("th",[t._v("*입금액")]),t._v(" "),s("th",[t._v("출금통장표시내용")]),t._v(" "),s("th",[t._v("입금통장표시내용")]),t._v(" "),s("th",[t._v("입금인코드")]),t._v(" "),s("th",[t._v("비고")]),t._v(" "),s("th",[t._v("업체사용key")])])])}]}}});
//# sourceMappingURL=8.6753b5088c3cac2d4d08.js.map